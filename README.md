# Corporate Chats (–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä)

–≠—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤, –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏. –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ **Python (Flask)** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Socket.IO** –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* **–Ø–∑—ã–∫:** Python 3.x
* **Web Framework:** Flask 3.0.0
* **Real-time Communication:** Flask-SocketIO (WebSocket)
* **Database:** SQLite (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è, –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è)
* **Authentication:** Flask-JWT-Extended (JSON Web Tokens)
* **Frontend (Static):** HTML/CSS/JS (–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ SocketIO –∏ REST API)

## üåü –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –ü—Ä–æ—Ñ–∏–ª—å

* **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JWT —Ç–æ–∫–µ–Ω–æ–≤.
* **–ü—Ä–æ—Ñ–∏–ª—å:** –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏, –±–∏–æ–≥—Ä–∞—Ñ–∏–∏, –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è (—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á–µ—Ç–æ–º –≤–æ–∑—Ä–∞—Å—Ç–∞) –∏ –ø–æ–ª–∞.
* **–ê–≤–∞—Ç–∞—Ä—ã:**
* –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **–≥–∞–ª–µ—Ä–µ–∏ –∞–≤–∞—Ç–∞—Ä–æ–≤** (–∏—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ).
* –í—ã–±–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞ –∏–∑ —Ä–∞–Ω–µ–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö.


* **–°—Ç–∞—Ç—É—Å:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ ¬´–û–Ω–ª–∞–π–Ω¬ª –∏ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (`last_active`).
* **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (`block/unblock`) –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### üí¨ –ß–∞—Ç—ã –∏ –°–æ–æ–±—â–µ–Ω–∏—è

* **–¢–∏–ø—ã —á–∞—Ç–æ–≤:** –õ–∏—á–Ω—ã–µ (1-–Ω–∞-1) –∏ –ì—Ä—É–ø–ø–æ–≤—ã–µ.
* **–û–±—â–∏–π —á–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∫–æ–º–Ω–∞—Ç—É `general`.
* **–°–æ–æ–±—â–µ–Ω–∏—è:**
* –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
* –û–±–º–µ–Ω —Ñ–∞–π–ª–∞–º–∏ (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ base64).
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∏ –≤–∏–¥–µ–æ-—Å–æ–æ–±—â–µ–Ω–∏–π (—Ç–∏–ø—ã `voice`, `video`).
* –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π.
* –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (–ª–æ–∫–∞–ª—å–Ω–æ ¬´–¥–ª—è —Å–µ–±—è¬ª –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ ¬´–¥–ª—è –≤—Å–µ—Ö¬ª).


* **–†–µ–∞–∫—Ü–∏–∏:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ç–∞–≤–∏—Ç—å –∏ —É–±–∏—Ä–∞—Ç—å —Ä–µ–∞–∫—Ü–∏–∏ (—ç–º–æ–¥–∑–∏) –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.

### üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ì—Ä—É–ø–ø–∞–º–∏

* **–†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å:** –í –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ –µ—Å—Ç—å —Ä–æ–ª–∏: `owner` (–≤–ª–∞–¥–µ–ª–µ—Ü), `admin` (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä), `member` (—É—á–∞—Å—Ç–Ω–∏–∫).
* **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ:**
* –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Ä–∞–∑–∂–∞–ª–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.
* –£–¥–∞–ª–µ–Ω–∏–µ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
* –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –∞–≤–∞—Ç–∞—Ä–∞ –≥—Ä—É–ø–ø—ã.


* **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Audit Logs):** –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –≤–∞–∂–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –≥—Ä—É–ø–ø–µ (–∫—Ç–æ –∫–æ–≥–æ –¥–æ–±–∞–≤–∏–ª, –∏–∑–º–µ–Ω–∏–ª –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —Ç.–¥.) –≤ —Ç–∞–±–ª–∏—Ü—É `group_logs`.

### üìπ –í–∏–¥–µ–æ—Å–≤—è–∑—å

* –°–∏–≥–Ω–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è WebRTC (—Å–æ–±—ã—Ç–∏—è `join_video_room`, `user_connected_video`) –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ P2P –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤.

---

## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö (SQLite)
![ER –î–∏–∞–≥—Ä–∞–º–º–∞](./ER.jpg)
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö. –§–∞–π–ª –±–∞–∑—ã: `chat.db`.

### –°—É—â–Ω–æ—Å—Ç–∏ (–¢–∞–±–ª–∏—Ü—ã)

#### 1. `users` (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

–•—Ä–∞–Ω–∏—Ç —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–æ—Ñ–∏–ª—å.

* `id`: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (—Ö–µ—à).
* `name`: –õ–æ–≥–∏–Ω (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π).
* `real_name`: –ù–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è.
* `password_hash`: –•–µ—à –ø–∞—Ä–æ–ª—è.
* `avatars_gallery`: JSON-—Å–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫/–¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—à–ª—ã—Ö –∞–≤–∞—Ç–∞—Ä–æ–≤.
* `last_active`: –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
* *–ü—Ä–æ—á–µ–µ:* `birth_date`, `gender`, `bio`, `created_at`.

#### 2. `rooms` (–ö–æ–º–Ω–∞—Ç—ã —á–∞—Ç–æ–≤)

–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–µ—Å–µ–¥–µ.

* `id`: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–æ–º–Ω–∞—Ç—ã.
* `type`: –¢–∏–ø —á–∞—Ç–∞ (`private` –∏–ª–∏ `group`).
* `deleted_for`: JSON-—Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–¥–∞–ª–∏–≤—à–∏—Ö —á–∞—Ç —É —Å–µ–±—è.
* *–ü—Ä–æ—á–µ–µ:* `name`, `avatar`, `created_by`.

#### 3. `participants` (–£—á–∞—Å—Ç–Ω–∏–∫–∏)

–°–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ ¬´–ú–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º¬ª –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∫–æ–º–Ω–∞—Ç–∞–º–∏.

* `room_id`: –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–º–Ω–∞—Ç—É.
* `user_id`: –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* `role`: –†–æ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ (`owner`, `admin`, `member`).

#### 4. `messages` (–°–æ–æ–±—â–µ–Ω–∏—è)

* `room_id`: –ö—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ.
* `sender_id`: –ö–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ.
* `type`: –¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (`text`, `file`, `voice`, `video`, `system`).
* `content`: –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–ª–∏ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª.
* `deleted_for`: –ö—Ç–æ —Å–∫—Ä—ã–ª —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.
* *–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏:* `created_at`, `edited_at`.

#### 5. `message_reactions` (–†–µ–∞–∫—Ü–∏–∏)

* `message_id`: –ù–∞ –∫–∞–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
* `user_id`: –ö—Ç–æ –ø–æ—Å—Ç–∞–≤–∏–ª.
* `reaction`: –¢–µ–∫—Å—Ç —Ä–µ–∞–∫—Ü–∏–∏ (—ç–º–æ–¥–∑–∏).

#### 6. `group_logs` (–ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π –≥—Ä—É–ø–ø—ã)

–ò—Å—Ç–æ—Ä–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.

* `room_id`: –í –∫–∞–∫–æ–π –≥—Ä—É–ø–ø–µ.
* `action`: –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è (`create`, `update`, `add`, `remove`, `promote`, `demote`).
* `details`: –¢–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è.

#### 7. `blocked_users` (–ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫)

* `blocker_id`: –ö—Ç–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª.
* `blocked_id`: –ö–æ–≥–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏.

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ó–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone https://github.com/AlexMaster168/corporate-chats
cd corporate-chats

```

2. **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```bash
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate

```


3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install -r requirements.txt

```


4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
```bash
python run.py

```


*–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `chat.db` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.*

## üì° API Endpoints & Socket Events

### REST API (`/api/...`)

* `POST /auth/register` ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è.
* `POST /auth/login` ‚Äî –í—Ö–æ–¥.
* `POST /user/profile` ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∏–æ/–∏–º–µ–Ω–∏.
* `POST /user/avatar/upload` ‚Äî –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞.
* `POST /upload` ‚Äî –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –≤ —á–∞—Ç.
* `POST /group/logs` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≥—Ä—É–ø–ø—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤).

### –û—Å–Ω–æ–≤–Ω—ã–µ SocketIO —Å–æ–±—ã—Ç–∏—è

* `connect/disconnect` ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–º –æ–Ω–ª–∞–π–Ω.
* `send_message` ‚Äî –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.
* `new_message` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (broadcast –≤ –∫–æ–º–Ω–∞—Ç—É).
* `edit_message` / `delete_message` ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º.
* `add_reaction` / `remove_reaction` ‚Äî –†–µ–∞–∫—Ü–∏–∏.
* `create_group` / `update_group_settings` ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏.
* `join_video_room` ‚Äî –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫—É.